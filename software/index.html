


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.0">
    
    
      
        <title>Access to Software - Snowmass21 Connect</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.89dc9fe3.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#access-to-software" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Snowmass21 Connect" class="md-header-nav__button md-logo" aria-label="Snowmass21 Connect">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Snowmass21 Connect
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Access to Software
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Snowmass21 Connect" class="md-nav__button md-logo" aria-label="Snowmass21 Connect">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    Snowmass21 Connect
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../accounting/" title="Access the Connect node" class="md-nav__link">
      Access the Connect node
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../data_management_main/" title="Data Management" class="md-nav__link">
      Data Management
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../job_submission/" title="Job Submissions to the OSG" class="md-nav__link">
      Job Submissions to the OSG
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Access to Software
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Access to Software" class="md-nav__link md-nav__link--active">
      Access to Software
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-osg-module-environment" class="md-nav__link">
    The OSG Module Environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-delphes" class="md-nav__link">
    Running Delphes
  </a>
  
    <nav class="md-nav" aria-label="Running Delphes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowmass21-login-node-local" class="md-nav__link">
    Snowmass21 login node (local)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphes-on-the-osg" class="md-nav__link">
    Delphes on the OSG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-whizard" class="md-nav__link">
    Running Whizard
  </a>
  
    <nav class="md-nav" aria-label="Running Whizard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowmass21-login-node-local_1" class="md-nav__link">
    Snowmass21 login node (local)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whizzard-on-the-osg" class="md-nav__link">
    Whizzard on the OSG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-osg-module-environment" class="md-nav__link">
    The OSG Module Environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-delphes" class="md-nav__link">
    Running Delphes
  </a>
  
    <nav class="md-nav" aria-label="Running Delphes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowmass21-login-node-local" class="md-nav__link">
    Snowmass21 login node (local)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphes-on-the-osg" class="md-nav__link">
    Delphes on the OSG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-whizard" class="md-nav__link">
    Running Whizard
  </a>
  
    <nav class="md-nav" aria-label="Running Whizard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowmass21-login-node-local_1" class="md-nav__link">
    Snowmass21 login node (local)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whizzard-on-the-osg" class="md-nav__link">
    Whizzard on the OSG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="access-to-software">Access to Software</h1>
<p>You can access software on the Snomwass21 Connect node from:</p>
<ol>
<li>Local installations in <code>/software</code></li>
<li>CVMFS in commonly used repos for the High Energy Physics community</li>
<li>OSG module environment </li>
</ol>
<p>For applications that need to run on OSG grid, only options 2) and 3) are viable. Two new CVMFS repos contain applications deployed for OSG jobs
<code>/cvmfs/snowmass21.opensciencegrid.org/software</code> and <code>/cvmfs/singularity.opensciencegrid.org/snowmass21software/</code>.</p>
<h2 id="the-osg-module-environment">The OSG Module Environment</h2>
<p>Many commonly used software packages and libraries are provided on the OSG through the module command.  OSG modules are made available through the OSG Application Software Installation Service (OASIS) CVMFS repo.</p>
<p>Use the module avail command on the Snowmass21 Connect node to see what software and libraries are available: <code>module avail</code>. Use the load command to load a specific module: <code>module load &lt;name_of_module</code>.  For example, in the <a href="..#Job-Submissions-to-the-OSG">Job Submission Guidelines</a>, users need to load the  stashcache module <code>module load stashcache</code> in order to the use the stashcp command on a remote node and transfer data there.</p>
<p>There are two things required in order to use modules in your HTCondor job.</p>
<pre><code>1. Create an execution script for the job. The script should load the needed modules before running the main application.

2. Include the following requirements in the HTCondor submission script:
Requirements = (HAS_MODULES =?= TRUE)
or 
Requirements = [Other requirements ] &amp;&amp; (HAS_MODULES =?= TRUE)
</code></pre>
<h2 id="running-delphes">Running Delphes</h2>
<h3 id="snowmass21-login-node-local">Snowmass21 login node (local)</h3>
<p>For local calculations on the Snowmass Connect node, Delphes is installed in <code>/software/Delphes-3.4.2</code>. You must first execute the following setup script: <code>source /cvmfs/sft.cern.ch/lcg/views/LCG_92/x86_64-slc6-gcc62-opt/setup.sh</code> before using the executables. </p>
<p>Export the installation path and adjust the LD_LIBRARY_PATH of the supporting libraries as:</p>
<pre><code>export delphes_install=/software/Delphes-3.4.2
module use /software/modulefiles/
module load gcc-8.2.0
export LD_LIBRARY_PATH=/cvmfs/sft.cern.ch/lcg/views/LCG_92/x86_64-slc6-gcc62-opt/lib:$LD_LIBRARY_PATH
export PATH=$delphes_install:$PATH
</code></pre>
<p>Running Delphes with HepMC input files:</p>
<pre><code>$delphes_install/DelphesHepMC $delphes_install/cards/delphes/card_CMS.tcl delphes_output.root &lt;input.hepmc&gt;
</code></pre>
<p>Running Delphes with STDHEP (XDR) input files:</p>
<pre><code>$delphes_install DelphesSTDHEP $delphes_install/cards/delphes/delphes_card_CMS.tcl delphes_output.root &lt;input.hep&gt;
</code></pre>
<p>Running Delphes with LHEF input files:</p>
<pre><code> $delphes_install/DelphesLHEF $delphes_install/cards/delphes/delphes_card_CMS.tcl delphes_output.root &lt;input.lhef&gt;
</code></pre>
<p>Running Delphes with files accessible via HTTP. The following example downloads a test HepMC input file and runs the executable. </p>
<pre><code>curl http://cp3.irmp.ucl.ac.be/~demin/test.hepmc.gz | gunzip | $delphes_install/DelphesHepMC $delphes_install/cards/delphes_card_CMS.tcl delphes_output.root
</code></pre>
<h3 id="delphes-on-the-osg">Delphes on the OSG</h3>
<p>For jobs on OSG, it recommended you use the singularity container image hosted <code>/cvmfs/singularity.opensciencegrid.org/snowmass21software/delphes-osg:latest</code>. The image contains the full installation of the software which includes the examplles folder. The following example is a submission script which will request the availability of Singularity as a requirement on the remote worker node and loads the image for your job. </p>
<pre><code>Universe = Vanilla
Executable     = run.sh
Requirements = HAS_SINGULARITY == TRUE
+SingularityImage = "/cvmfs/singularity.opensciencegrid.org/snowmass21software/delphes-osg:latest"
Error   = output.err.$(Cluster)-$(Process)
Output  = output.out.$(Cluster)-$(Process)
Log     = output.log.$(Cluster)
should_transfer_files = YES
WhenToTransferOutput = ON_EXIT
request_cpus = 1
request_memory = 1 GB
+ProjectName="snowmass21.energy"
Queue 1
</code></pre>
<p>The executable script, run.sh, contains the HTTP  listed above for local jobs. </p>
<pre><code>#!/bin/bash

curl http://cp3.irmp.ucl.ac.be/~demin/test.hepmc.gz | gunzip | DelphesHepMC /opt/Delphes-3.4.2/cards/delphes_card_CMS.tcl ~/delphes_output.root
</code></pre>
<p>There is no need to source any external environment and all Delphes executables have been added to $PATH as part of the image. </p>
<h2 id="running-whizard">Running Whizard</h2>
<h3 id="snowmass21-login-node-local_1">Snowmass21 login node (local)</h3>
<p>Whizard is installed on the snowmass21 submit node in /software/ee_gg. You must set up your environment before by running the following on the submit node: </p>
<pre><code>    module use /software/modulefiles/
    module load gcc-8.2.0 
    export LD_LIBRARY_PATH=/software/ee_gen/./packages/OpenLoops/lib:$LD_LIBRARY_PATH
    export PATH=/software/ee_gen/bin:$PATH
</code></pre>
<p>Examples are contained in this directory: /software/ee_gen/share/whizard/examples. The whizard executable will be in your $PATH. You can run an example from your home directory as: </p>
<pre><code>    whizard /software/ee_gen/share/whizard/examples/LEP_cc10.sin
</code></pre>
<h3 id="whizzard-on-the-osg">Whizzard on the OSG</h3>
<p>Whizard is also available over cvmfs in /cvmfs/snowmass21.opensciencegrid.org/ee_gg. To run on the grid, ensure that your submit script has <code>Requirements = (HAS_MODULES =?= TRUE)</code>. You must also source the setup script in /cvmfs/snowmass21.opensciencegrid.org/ee_gg/setup.sh which will set up your environment. An example of an OSG job submission for whizard is inlined below:</p>
<p>Submit script:</p>
<pre><code>    Universe = Vanilla
    Executable     = run.sh
    Requirements = (HAS_CVMFS =?= TRUE) &amp;&amp; (OSGVO_OS_STRING == "RHEL 7) &amp;&amp; (HAS_MODULES =?= TRUE) 
    Error   = output.err.$(Cluster)-$(Process)
    Output  = output.out.$(Cluster)-$(Process)
    Log     = output.log.$(Cluster)
    should_transfer_files = YES
    WhenToTransferOutput = ON_EXIT
    request_cpus = 1
    request_memory = 1 GB
    +ProjectName="snowmass21.energy"
    Queue 1
</code></pre>
<p>Execution script (run.sh from the submit script above):</p>
<pre><code>    #!/bin/bash
    source /cvmfs/snowmass21.opensciencegrid.org/ee_gg/setup.sh
    whizard /cvmfs/snowmass21.opensciencegrid.org//ee_gen/share/whizard/examples/LEP_cc10.sin
</code></pre>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../job_submission/" title="Job Submissions to the OSG" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Job Submissions to the OSG
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.36cbf620.min.js"></script>
      <script src="../assets/javascripts/bundle.00c583dd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["instant"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>